query internalOrders($page: Int) {
    internalOrders(page: $page) {
        count
        numPages
        results {
            id
            sourceOffice {
                id
                name
            }
            targetOffice {
                id
                name
            }
            createdOn

            latestHistoryEntry {
                status
            }
        }
    }
}

query internalOrderById($id: ID!) {
    internalOrderById(id: $id) {
        id
        createdOn
        historyEntries {
            ...InternalOrderHistoryEntryItem
        }
        sourceOffice {
            id
            houseNumber
            name
            street
            locality {
                name
                postalCode
            }
        }
        targetOffice {
            id
            houseNumber
            name
            street
            locality {
                name
                postalCode
            }
        }
        latestHistoryEntry {
            status
        }
        orderItems {
            ...InternalOrderListItem
        }
    }
}

mutation createInternalOrder($data: CreateInternalOrderInput!) {
    createInternalOrder(data: $data) {
        internalOrder {
            id
        }
        error
    }
}

mutation createSupplierOrder($data: CreateSupplierOrderInput!) {
    createSupplierOrder(data: $data) {
        supplierOrder {
            id
        }
        error
    }
}

query supplierOrders($page: Int) {
    supplierOrders(page: $page) {
        count
        numPages
        results {
            id
            supplier {
                name
            }
            targetOffice {
                name
            }
            createdOn
            latestHistoryEntry {
                status
            }
        }
    }
}

query supplierOrderById($id: ID!) {
    supplierOrderById(id: $id) {
        id
        supplier {
            cuit
            name
            email
            locality {
                name
                postalCode
                state
            }
            houseNumber
            streetName
            phoneCode
            phoneNumber
        }
        targetOffice {
            id
            name
            street
            houseNumber
            locality {
                name
            }
        }
        latestHistoryEntry {
            status
            user {
                firstName
                lastName
                email
            }
        }
        orderItems {
            id
            product {
                id
                name
                brand {
                    name
                }
                type
            }
            quantityOrdered
            quantityReceived
        }
    }
}

query supplierOrdersBySupplierId($id: ID!) {
    supplierOrdersBySupplierId(id: $id) {
        id
        createdOn
        targetOffice {
            name
            street
            houseNumber
        }
        latestHistoryEntry {
            status
            user {
                email
                firstName
                lastName
            }
            createdOn
        }
        orderItems {
            id
            product {
                id
                name
                brand {
                    name
                }
                name
                price
                type
            }
            quantityOrdered
            quantityReceived
        }
    }
}

mutation CreateSupplier($data: CreateSupplierInput!) {
    createSupplier(data: $data) {
        supplier {
            id
            cuit
            email
            houseNumber
            houseUnit
            name
            note
            phoneCode
            phoneNumber
            streetName
            locality {
                name
                postalCode
                state
            }
        }
        error
    }
}

mutation deleteSupplierOrder($id: ID!) {
    deleteSupplierOrder(id: $id) {
        success
    }
}

mutation deleteInternalOrder($id: ID!) {
    deleteInternalOrder(id: $id) {
        success
    }
}

mutation InProgressInternalOrder(
    $id: ID!
    $note: String
    $items: [InProgressInternalOrderItemInput!]!
) {
    inProgressInternalOrder(id: $id, note: $note, items: $items) {
        internalOrder {
            id
            latestHistoryEntry {
                status
            }
            historyEntries {
                ...InternalOrderHistoryEntryItem
            }
            orderItems {
                ...InternalOrderListItem
            }
        }
        error
    }
}

mutation receiveInternalOrder(
    $id: ID!
    $note: String
    $items: [ReceiveInternalOrderItemInput!]!
) {
    receiveInternalOrder(id: $id, note: $note, items: $items) {
        internalOrder {
            id
            latestHistoryEntry {
                status
            }
            historyEntries {
                ...InternalOrderHistoryEntryItem
            }
            orderItems {
                ...InternalOrderListItem
            }
        }
        error
    }
}

mutation cancelInternalOrder($id: ID!, $note: String) {
    cancelInternalOrder(id: $id, note: $note) {
        internalOrder {
            id
            latestHistoryEntry {
                status
            }
            historyEntries {
                ...InternalOrderHistoryEntryItem
            }
        }
        error
    }
}

mutation receiveOrderSupplier($orderSupplierId: ID!) {
    receiveOrderSupplier(orderSupplierId: $orderSupplierId) {
        orderSupplier
        error
    }
}

query numberOfPendingOutgoingInternalOrders {
    numberOfPendingOutgoingInternalOrders
}

fragment InternalOrderListItem on InternalOrderItem {
    id
    product {
        id
        name
        brand {
            name
        }
        name
        price
        type
    }
    quantityOrdered
    quantityReceived
    quantitySent

    sourceOfficeQuantityBeforeSend
    sourceOfficeQuantityAfterSend

    targetOfficeQuantityBeforeReceive
    targetOfficeQuantityAfterReceive
}

fragment InternalOrderHistoryEntryItem on InternalOrderHistory {
    id
    createdOn
    status
    note
    responsibleUser {
        firstName
        lastName
        email
    }
}
